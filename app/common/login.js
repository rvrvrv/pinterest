'use strict';function loggedIn(a){$('.user-info').html('\n    <a class="dropdown-button" data-activates="userDropdown">\n      <li><img src="'+a.img+'" alt="'+a.name+'"></li>\n      <li class="hide-on-small-only nav-name">'+a.name.split(' ')[0]+'</li>\n    </a>'),$('#userDropdown').html('\n    <li><a class="waves-effect waves-light dyn-link" data-link="#modal-newPin">Add a Pin</a></li>\n    <li><a class="waves-effect waves-red" id="logoutBtn">Log Out</a></li>'),$('.dropdown-button').dropdown({inDuration:350,outDuration:175,constrainWidth:!1,hover:!0,belowOrigin:!0,alignment:'left',stopPropagation:!1}),$('.progress').after('\n    <div class="container" id="filters">\n      <div class="row">\n        <div class="col s12">\n          <ul class="tabs tabs-fixed-width">\n            <li class="tab col s4"><a class="filter-btn active" id="allPinsBtn" data-filter="*">All Pins</a></li>\n            <li class="tab col s4"><a class="filter-btn" data-filter=".yours">Yours</a></li>\n            <li class="tab col s4"><a class="filter-btn" data-filter=".liked">Liked</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>'),$('.filter-btn').click(function(){filterPinsByBtn(this)}),$('.modals').append('\n    <div id="modal-newPin" class="modal">\n      <div class="modal-content">\n        <div class="row new-pin">\n          <img class="z-depth-4" id="newPinImg" src="../public/img/galaxy.jpg" onerror="badImg(this.src)" />\n        </div>\n        <form class="col s12">\n          <div class="row center">\n            <h5>Add a pin! Fill out the fields below, and share your awesome pin with the community.</h5>\n          </div>\n          <div class="row">\n            <div class="input-field col s12">\n              <input id="newPinCaption" alt="Caption" placeholder="Radiant Galaxy" type="text" class="validate" pattern="[a-zA-Z0-9.,?!@#$%&*() ]{1,}$" maxlength="50" data-length="50">\n              <label class="active" for="newPinCaption" data-error="Please enter a valid caption.">Caption</label>\n            </div>\n          </div>\n          <div class="row">\n            <div class="input-field col s12">\n              <input id="newPinUrl" alt="Image URL" placeholder="https://goo.gl/Ls5l2M" type="url" class="validate" maxlength="200" data-length="200">\n              <label class="active" for="newPinUrl" data-error="Please enter a valid image URL.">Image URL</label>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer valign-wrapper">\n        <div class="row center">\n          <a class="waves-effect waves-green btn-flat" id="saveBtn" onclick="savePin()">Save Pin</a>\n          <a class="waves-effect waves-red btn-flat" onclick="resetPinModal()">Cancel</a>\n        </div>\n      </div>\n    </div>\n    <div id="modalConfirmSave" class="modal modal-confirm">\n      <div class="modal-content">\n        <div class="row center">\n          <h5>Are you sure you would like to save this pin?</h5>\n        </div>\n      </div>\n      <div class="modal-footer valign-wrapper">\n        <div class="row center">\n          <a class="waves-effect waves-green btn-flat" id="confirmSaveBtn" onclick="performSave()">Yes</a>\n          <a class="waves-effect waves-red btn-flat modal-action modal-close" id="notConfirmedBtn">No</a>\n        </div>\n      </div>\n  </div>'),$('#newPinUrl').focusout(function(){return updateImg()}),$('.modals').append('\n    <div id="modalConfirmDelete" class="modal modal-confirm">\n      <div class="modal-content">\n        <div class="row center">\n          <h5 id="delMsg"></h5>\n        </div>\n      </div>\n      <div class="modal-footer valign-wrapper">\n        <div class="row center">\n          <a class="waves-effect waves-red btn-flat" id="confirmDelBtn">Yes</a>\n          <a class="waves-effect waves-yellow btn-flat modal-action modal-close">No</a>\n        </div>\n      </div>\n    </div>'),$('.modal').modal(),a.likes.forEach(function(a){var b=$('.right a[data-owner="'+a.ownerId+'"][data-url="'+a.url+'"]');b&&likeBtnSwitch(b,!0)}),a.pins.forEach(function(b){var c=$('.grid-item[data-owner="'+a.id+'"][data-url="'+b+'"]');c.addClass('yours'),c.find('.left').empty().removeClass('owner-filter').unbind(),c.find('.left').html(generateDelBtn(b,c.find('.center').html(),a.id)),$('.tooltipped').tooltip()}),$('.dyn-link').each(function(){var a=this,b=$(this).data('link');b.includes('modal')?$(this).click(function(){return $(b).modal('open')}):b.includes('like')&&($(this).prop('onclick',null),$(this).removeAttr('onclick'),'like'===b&&$(this).click(function(){return likePin(a)}))}),$('#logoutBtn').click(function(){location.replace('/logout')}),$('.login-btn').remove()}function checkLoginStatus(){ajaxFunctions.ready(ajaxFunctions.ajaxRequest('GET','/api/',function(a){'no'===a?$('.login-btn').removeClass('hidden'):loggedIn(JSON.parse(a))}))}